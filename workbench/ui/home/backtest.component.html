<div class="areas">
    <tilearea *ngFor="let area of areas" [dataSource]="area.dataSource" [styleObj]="area.styleObj"></tilearea>
</div>
<div class="block-shadow-info" *ngIf="bshow" id="config">
    <div class="pop-center fg-white bg-darker">
        <div class="header">
            <a href="#" class="icon mif-home fg-white"></a>
            <span class="title">{{panelTitle}}</span>
        </div>
        <div class="content">
            <div *ngIf="config.curstep==1" class="page">
                <div>
                    <h4>请选择策略</h4>
                    <hr>
                </div>
                <div>
                    <span class="strategytext">策略：</span>
                    <select class="strategy-sel" (change)="onSelectStrategy(strategyCores[strategycore.selectedIndex])" #strategycore [disabled]="bRead">
                                <option  *ngFor="let name of strategyCores" >{{name}}</option>
                            </select>
                </div>
                <div class="name-content">
                    <div>
                        <h4>策略服务名与中文标识</h4>
                        <hr>
                    </div>
                    <label class="label-name">服务名:<input type="text" class = "input-col" placeholder="strategy name" [(ngModel)]="config.name" [readonly]= "bRead"></label>
                    <label class="label-name">中文名 : <input type="text" class = "input-col" placeholder="Chinese name" [(ngModel)]="config.chinese_name"></label>
                </div>
            </div>
            <div *ngIf="config.curstep==2" class="page">
                <div>
                    <h4>策略实例配置</h4>
                    <hr>
                </div>
                <div>
                    <div style="max-height: 375px; overflow-y: auto;">
                        <div class="accordion" data-role="accordion" data-close-any="true">
                            <div *ngFor="let instance of config.strategyInstances;let i = index" class="frame">
                                <div class="content bg-gray">
                                    <div class="accordion" data-role="accordion" data-close-any="true">
                                        <div class="frame">
                                            <div class="heading bg-grayLight">
                                                <div class="cell">参数信息</div>
                                            </div>
                                            <div>
                                                <fieldset>
                                                    <legend>Parameters</legend>
                                                    <div style="max-width: 700px; overflow-x: auto;">
                                                        <table>
                                                            <tr>
                                                                <th *ngFor="let param of instance.parameters">{{param.name}}</th>
                                                            </tr>
                                                            <tr>
                                                                <td *ngFor="let param of instance.parameters"><label><input type="text" [placeholder]="param.name" [(ngModel)]="param.value"></label></td>
                                                            </tr>
                                                        </table>
                                                    </div>
                                                </fieldset>
                                                <fieldset>
                                                    <legend>Comments</legend>
                                                    <div style="max-width: 700px; overflow-x: auto;">
                                                        <table>
                                                            <tr>
                                                                <th *ngFor="let comment of instance.comments">{{comment.name}}</th>
                                                            </tr>
                                                            <tr>
                                                                <td *ngFor="let comment of instance.comments"><label><input type="text" [placeholder]="comment.name" [(ngModel)]="comment.value"></label></td>
                                                            </tr>
                                                        </table>
                                                    </div>
                                                </fieldset>
                                                <fieldset>
                                                    <legend>Instruments</legend>
                                                    <div style="max-width: 700px; overflow-x: auto;">
                                                        <table>
                                                            <tr>
                                                                <th *ngFor="let instrument of instance.instruments">{{instrument.name}}</th>
                                                            </tr>
                                                            <tr>
                                                                <td *ngFor="let instrument of instance.instruments"><label><input type="text" [placeholder]="instrument.name" [(ngModel)]="instrument.value"></label></td>
                                                            </tr>
                                                        </table>
                                                    </div>
                                                </fieldset>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div *ngIf="config.curstep==3" class="page">
                <div>
                    <h4>通道信息</h4>
                    <hr>
                </div>
                <div style="max-height: 375px; overflow-y: auto;">
                    <div class="accordion" data-role="accordion" data-close-any="true">
                        <div class="frame">
                            <div class="content bg-darker">
                                <fieldset *ngIf="config.channels.gateway">
                                    <legend>Preference</legend>
                                    <div>
                                        MatchMode:
                                        <label><input name="matchmode" type="radio" value="1" [(ngModel)]="config.loopbackConfig.option.simlevel">无条件成交</label>
                                        <label><input name="matchmode" type="radio" value="2" [(ngModel)]="config.loopbackConfig.option.simlevel">按价格成交</label>
                                        <label><input name="matchmode" type="radio" value="3" [(ngModel)]="config.loopbackConfig.option.simlevel">按价量成交</label>
                                    </div>
                                    <div>
                                        Duration:
                                        <input type="date" [(ngModel)]="config.loopbackConfig.option.timebegin">
                                        <span>-</span>
                                        <input type="date" [(ngModel)]="config.loopbackConfig.option.timeend">
                                    </div>
                                    <div>
                                        Calc Tick:
                                        <input type="text" [(ngModel)]="config.loopbackConfig.option.period">
                                        <label><input name="unit" type="radio" value="0" [(ngModel)]="config.loopbackConfig.option.unit">分钟</label>
                                        <label><input name="unit" type="radio" value="1" [(ngModel)]="config.loopbackConfig.option.unit">天</label>
                                    </div>
                                    <div>
                                        Speed:
                                        <label><input name="speed" type="radio" value="1" [(ngModel)]="config.loopbackConfig.option.speed">1</label>
                                        <label><input name="speed" type="radio" value="2" [(ngModel)]="config.loopbackConfig.option.speed">2</label>
                                        <label><input name="speed" type="radio" value="3" [(ngModel)]="config.loopbackConfig.option.speed">3</label>
                                        <label><input name="speed" type="radio" value="4" [(ngModel)]="config.loopbackConfig.option.speed">4</label>
                                        <label><input name="speed" type="radio" value="5" [(ngModel)]="config.loopbackConfig.option.speed">5</label>
                                        <label><input name="speed" type="radio" value="6" [(ngModel)]="config.loopbackConfig.option.speed">6</label>
                                        <label><input name="speed" type="radio" value="7" [(ngModel)]="config.loopbackConfig.option.speed">7</label>
                                        <label><input name="speed" type="radio" value="8" [(ngModel)]="config.loopbackConfig.option.speed">8</label>
                                        <label><input name="speed" type="radio" value="9" [(ngModel)]="config.loopbackConfig.option.speed">9</label>
                                        <label><input name="speed" type="radio" value="10" [(ngModel)]="config.loopbackConfig.option.speed">10</label>
                                    </div>
                                </fieldset>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div *ngIf="config.curstep==4" class="page">
                <div>
                    <h4>Are you Sure?</h4>
                    <hr>
                </div>
                <div>
                    <label >Make sure whether you have done a correct setting, then click 'Finish' Or reset them.</label>
                </div>
            </div>
        </div>
        <div class="footer">
            <div class="pagebtn">
                <button class="button" (click)="hide()">hide</button>
                <button class="button" [disabled]="config.curstep==1" (click)="prev()">Prev</button>
                <button class="button" [disabled]="config.curstep==4" (click)="next()">Next</button>
                <button class="button" [disabled]="config.curstep!=4" (click)="finish()">Finish</button>
            </div>
        </div>
    </div>
</div>
<div class="change" *ngIf="bChangeShow">
    <div class="content bg-darker ">
        <fieldset class="pricefield" *ngIf="config.channels.feedhandler">
            <legend class="changelengend">切换行情通道</legend>
            <table class="table condensed">
                <thead>
                    <tr>
                        <th>名称</th>
                        <th>地址</th>
                        <th>端口</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>{{config.channels.feedhandler.name}}</td>
                        <td><input type="text" [(ngModel)]="config.channels.feedhandler.addr"></td>
                        <td><input type="text" [(ngModel)]="config.channels.feedhandler.port"></td>
                    </tr>
                </tbody>
            </table>
        </fieldset>
    </div>
    <div class="changefooter">
        <button class="button" (click)="hideChange()">隐藏</button>
        <button class="button" (click)="lookbackTosimulation()">确定</button>
    </div>
</div>